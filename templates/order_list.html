<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å¸Œæœ›æå‡º</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>ğŸ™‹ ã‚·ãƒ•ãƒˆå¸Œæœ›æå‡º (Order)</h1>

    <!-- ===== æå‡ºãƒ»ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ  ===== -->
    <div class="panel">
        <form method="POST">

            {% if edit_order %}
                <input type="hidden" name="order_id" value="{{ edit_order.id }}">
                <p style="color:#e67e22;">â€» ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</p>

                <p>
                    ã‚¹ã‚¿ãƒƒãƒ•ï¼š{{ edit_order.user.name }}
                </p>

                <p>
                    æ—¥ä»˜ï¼š{{ edit_order.product.date }}
                </p>

                <p>
                    æ™‚é–“ï¼š
                    <input type="text" name="product_name"
                           value="{{ edit_order.product.name }}"
                           required>
                </p>

                <button type="submit">æ›´æ–°</button>
                <a href="{{ url_for('order.index') }}">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>

            {% else %}
                <p>
                    ã‚¹ã‚¿ãƒƒãƒ•ï¼š
                    <select name="user_id">
                        {% for u in users %}
                        <option value="{{ u.id }}">{{ u.name }}</option>
                        {% endfor %}
                    </select>
                </p>

                <p>
                    å¸Œæœ›æ ï¼š
                    <select name="product_id">
                        {% for p in products %}
                        <option value="{{ p.id }}">
                            {{ p.date }} / {{ p.name }}
                        </option>
                        {% endfor %}
                    </select>
                </p>

                <button type="submit">æå‡º</button>
            {% endif %}

        </form>
    </div>

    <!-- ===== æå‡ºä¸€è¦§ ===== -->
    <div class="panel" style="margin-top:20px;">
        <table class="styled-table">
            <thead>
                <tr>
                    <th>ã‚¹ã‚¿ãƒƒãƒ•</th>
                    <th>å¸Œæœ›æ </th>
                    <th>æå‡ºæ—¥æ™‚</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for o in orders %}
                <tr {% if edit_order and edit_order.id == o.id %}style="background:#fff8e1;"{% endif %}>
                    <td>{{ o.user.name }}</td>
                    <td>{{ o.product.date }} {{ o.product.name }}</td>
                    <td>{{ o.created_at }}</td>
                    <td>
                        <a href="{{ url_for('order.index', edit=o.id) }}">ç·¨é›†</a>
                        |
                        <a href="{{ url_for('order.index', delete=o.id) }}"
                           onclick="return confirm('ã“ã®å¸Œæœ›ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">
                            å‰Šé™¤
                        </a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4">ã¾ã å¸Œæœ›ã¯ã‚ã‚Šã¾ã›ã‚“</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <p style="margin-top:20px;">
        <a href="/">â† TOPã¸</a>
    </p>
</div>

</body>
</html>
